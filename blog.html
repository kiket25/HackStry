<!doctype html>
<html class="no-js" lang="ES">

<head>
  <meta charset="utf-8">
  <title>HackStry</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:title" content="">
  <meta property="og:type" content="">
  <meta property="og:url" content="">
  <meta property="og:image" content="">

  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icon.png">

  <link rel="stylesheet" href="css/style.css"> <!-- Mismo estilo del blog -->

  <meta name="theme-color" content="#fafafa">
</head>

<body>

<header>
    <img src="img/logo.png" alt="Logotipo HackStry" width="200">
  
  <nav>
    <ul>
      <li><a href="index.html">Home</a></li>
      <li><a href="blog.html">Blog</a></li>
      <li><a href="about.html">About Me</a></li>
    </ul>
  </nav>
</header>

<main>
  <h1>Blog sobre Ciberseguridad y Sistemas</h1>  

  <section id="recent-posts" class="posts-container">
    <!-- Aquí se cargarán dinámicamente los posts -->
  </section>

  <!-- Vista detallada del post -->
  <div id="post-detail" class="post-detail" style="display:none;">
      <span class="close">&times;</span>
      <div id="post-content"></div>
  </div>
  
</main>

<footer>
  <p>® 2024 HackStry. Todos los derechos reservados</p>
</footer>

<script>

function showPostDetail(post) {
    const postDetail = document.getElementById('post-detail');
    const postContent = document.getElementById('post-content');

    postContent.innerHTML = `
        <h2>${post.title}</h2>
        <p><strong>Categoría:</strong> ${post.category}</p>
        <canvas id="pdf-render"></canvas>
    `;
    
    postDetail.style.display = 'block';

    if (post.fileType === 'pdf') {
        const url = post.content;
        const pdfjsLib = window['pdfjs-dist/build/pdf'];

        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://mozilla.github.io/pdf.js/build/pdf.worker.js';
        
        pdfjsLib.getDocument(url).promise.then(function(pdfDoc_) {
            let pdfDoc = pdfDoc_;
            let pageNum = 1;

            pdfDoc.getPage(pageNum).then(function(page) {
                let viewport = page.getViewport({scale: 1.5});
                let canvas = document.getElementById('pdf-render');
                let context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;

                let renderContext = {
                    canvasContext: context,
                    viewport: viewport
                };
                page.render(renderContext);
            });
        });
    }
}

</script>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

</body>
</html>